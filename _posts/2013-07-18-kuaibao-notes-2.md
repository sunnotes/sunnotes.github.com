---
layout: post
title: 快报手记2：SAE本地读写XML失败的尝试
description: 
category: code
tags: [weixin , weibo , ali_bao ]
---
{% include JB/setup %}


[余额宝快报] (http://weibo.com/aliyuebao) 微博推出之后，便考虑写一个自动发微博的程序，
通过CRONTAB周期性抓取，本地XML保存定时发博，结果尝试失败。 


##问题

原计划采用的XML作为本地数据缓存，调用SAE的CRONTAB去定时抓取天弘官网的数据，CHECK数据是否更新，
若最新的收益数据为当天的数据且本地XML无此数据，则认为是第一次更新，发送微博并将最新的记录写入XML。


由于之前没有用过PHP，用了一个周末，本地多次测试完全OK后发布SAE。


之前并不知道SAE平台不支持直接读取file，第二天下午天弘更新数据后，程序自动发微博，但是没法将记录写入本地文件，
导致CRONTAB每次调用都会发微博，且频率为2分钟一次。当时我还在参加公司组织的羽毛球比赛，女友在家删微博删到手软。

尝试失败！


##结果

由于没法本地文件标记，所以之后便用CRONTAB在每天下午7点半定时抓取发布微博。


##后记

本系列博文用于记录维护优化 _余额宝快报_ 的点点滴滴，分享技术及经验。